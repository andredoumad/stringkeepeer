{% extends 'base/base.html' %}
{% block content %}

<p style="font-family: 'Palatino'; font-size:14px">
<font color = 'white'>

<!-- {{ object.order_id }} -- {{ object.cart }} -->

{% if not billing_profile %}

    <div class='row'>
        <div class='col'>
            <p class='lead'>Login</p>
            
            {% include 'accounts/snippets/form.html' with form=login_form next_url=request.build_absolute_uri %}
            <br>
        </div>
        <div class='col'> 
            <br>
            Continue as Guest
            <br>
            {% url "guest_register" as guest_register_url %}
            <br>
            {% include 'accounts/snippets/form.html' with form=guest_form next_url=request.build_absolute_uri action_url=guest_register_url %}
            <br>
        </div>
    
        </div>
        {% if ascii_art %}
        <pre>
          <p style="font-size:2px">
          <font color = '#85C1E9'> {{ascii_art}}
        </pre>
        {% endif %}
{% else %}
    {% if not object.billing_address %}
        <div class='row'>
            <div class='col-12'>
                <p class='lead'>Billing Address</p>
                <hr/>

            <div class='col-md-12'>
                {% url "checkout_address_create" as checkout_address_create %}
                {% include 'addresses/form.html' with form=address_form next_url=request.build_absolute_uri action_url=checkout_address_create address_type='billing' %}
            </div>
        </div>
        {% url 'checkout_address_reuse' as checkout_address_reuse %}
        {% include 'addresses/prev_addresses.html' with address_qs=address_qs next_url=request.build_absolute_uri action_url=checkout_address_reuse address_type='billing' %}
    {% else %}

        <h1>Complete Checkout</h1>
        <p>Billing Address: {{ object.billing_address.get_address }}</p>
        <p>Cart Items: {% for subscription in object.cart.subscriptions.all %}{{ subscription }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
        <p>Subtotal: {{ object.cart.subtotal }}</p>
        <p>Total: {{ object.total }}</p>
        <form class='form' method='POST' action=''>{% csrf_token %}
            <button type='submit' class ='btn btn-info'>Complete Checkout</button>
        </form>

    {% endif %}
{% endif %}
{% endblock %}