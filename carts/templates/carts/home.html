{% extends 'base/base.html' %}
{% block content %}

<p style="font-family: 'Palatino'; font-size:14px">
<font color = 'white'>

{% if not user.is_authenticated %}
    <font color = 'red'>
    You have been not been authenticated.<br>
{% endif %}

{% if user.is_authenticated %}
    <h1><i class="fas fa-shopping-cart"></i></h1>
    {% if cart.subscriptions.exists %}
        <table class="table table-dark" >
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Subscription</th>
                    <th scope="col">Price/month</th>
                </tr>
            </thead>
            <tbody>
            {% for subscription in cart.subscriptions.all %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>
                        <a href='{{ subscription.get_absolute_url }}'>{{ subscription.title }}</a>
                        {% include 'subscription/snippets/update-cart.html' with subscription=subscription cart=cart in_cart=True %}
                    </td>
                    <td>{{ subscription.price }}</td>
                </tr>
            {% endfor %}
            <tr>
                <th colspan="2"></th>
                <td><b>Subtotal</b> {{ cart.subtotal }}</td>
            </tr>
            <tr>
                <th colspan="2"></th>
                <td><b>Total</b> {{ cart.total }}</td>
            </tr>
            </tbody>
        </table>
    {% else %}
        <p class='lead'> Cart is empty </p>
    {% endif %}
{% endif %}

{% endblock %}